#!/bin/bash
#SBATCH -J prem           # Job name
#SBATCH -o prem.o%j       # Name of stdout output file
#SBATCH -e prem.e%j       # Name of stderr error file
#SBATCH -p normal          # Queue (partition) name
#SBATCH -N 4               # Total # of nodes (must be 1 for serial)
#SBATCH -n 16               # Total # of mpi tasks (should be 1 for serial)
#SBATCH -t 12:00:00        # Run time (hh:mm:ss)
#SBATCH --mail-user=byz@tacc.utexas.edu
#SBATCH --mail-type=all    # Send email at begin and end of job
#SBATCH -A Project-Alpha       # Allocation name (req'd if you have more than 1)

source activate /work/07034/byz/stampede2/anaconda3/envs/his
#module load cuda
search_dir=/work/07034/byz/maverick2/GNN/models/Train_on_TCGA/2_7

for entry in "$search_dir"/*
do
  echo ${entry:55}
  out="/work/07034/byz/maverick2/pred/"
  myout="${out}${entry:55}.csv"
  ibrun python predict_CG_512_multi.py --mpath $entry --outdir $myout
done
#ibrun python predict_CG_multi.py --dir /work/07034/byz/maverick2/GNN/LUAD_CG/ --mpath /work/07034/byz/maverick2/GNN/models/4_27/E2F4_lr_0.00005_l2_0.0.pt --outdir /work/07034/byz/maverick2/TCGA_LUAD_E2F4_lr_0.00005_l2_0.csv
#python cellmor.py --start=1 --step=10 --index=100 
